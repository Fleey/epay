!function(a,b){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=a.document?b(a,!0):function(a){if(!a.document)throw new Error("Geetest requires a window with a document");return b(a)}:b(a)}("undefined"!=typeof window?window:this,function(a){"use strict";function f(a){this._obj=a}function g(a){var b=this;new f(a)._each(function(a,c){b[a]=c})}var c,d,e,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y;if("undefined"==typeof a)throw new Error("Geetest requires browser environment");return c=a.document,d=a.Math,e=c.getElementsByTagName("head")[0],f.prototype={_each:function(a){var c,b=this._obj;for(c in b)b.hasOwnProperty(c)&&a(c,b[c]);return this}},g.prototype={api_server:"api.geetest.com",protocol:"http://",type_path:"/gettype.php",fallback_config:{slide:{static_servers:["static.geetest.com","dn-staticdown.qbox.me"],type:"slide",slide:"/static/js/geetest.0.0.0.js"},fullpage:{static_servers:["static.geetest.com","dn-staticdown.qbox.me"],type:"fullpage",fullpage:"/static/js/fullpage.0.0.0.js"}},_get_fallback_config:function(){var a=this;return i(a.type)?a.fallback_config[a.type]:a.new_captcha?a.fallback_config.fullpage:a.fallback_config.slide},_extend:function(a){var b=this;new f(a)._each(function(a,c){b[a]=c})}},h=function(a){return"number"==typeof a},i=function(a){return"string"==typeof a},j=function(a){return"boolean"==typeof a},k=function(a){return"object"==typeof a&&null!==a},l=function(a){return"function"==typeof a},m={},n={},o=function(){return parseInt(1e4*d.random())+(new Date).valueOf()},p=function(a,b){var f,d=c.createElement("script");d.charset="UTF-8",d.async=!0,d.onerror=function(){b(!0)},f=!1,d.onload=d.onreadystatechange=function(){f||d.readyState&&"loaded"!==d.readyState&&"complete"!==d.readyState||(f=!0,setTimeout(function(){b(!1)},0))},d.src=a,e.appendChild(d)},q=function(a){return a.replace(/^https?:\/\/|\/$/g,"")},r=function(a){return a=a.replace(/\/+/g,"/"),0!==a.indexOf("/")&&(a="/"+a),a},s=function(a){if(!a)return"";var b="?";return new f(a)._each(function(a,c){(i(c)||h(c)||j(c))&&(b=b+encodeURIComponent(a)+"="+encodeURIComponent(c)+"&")}),"?"===b&&(b=""),b.replace(/&$/,"")},t=function(a,b,c,d){b=q(b);var e=r(c)+s(d);return b&&(e=a+b+e),e},u=function(a,b,c,d,e){var f=function(g){var h=t(a,b[g],c,d);p(h,function(a){a?g>=b.length-1?e(!0):f(g+1):e(!1)})};f(0)},v=function(b,c,d,e){if(k(d.getLib))return d._extend(d.getLib),e(d),void 0;if(d.offline)return e(d._get_fallback_config()),void 0;var f="geetest_"+o();a[f]=function(b){"success"===b.status?e(b.data):b.status?e(d._get_fallback_config()):e(b),a[f]=void 0;try{delete a[f]}catch(c){}},u(d.protocol,b,c,{gt:d.gt,callback:f},function(a){a&&e(d._get_fallback_config())})},w=function(a,b){var c={networkError:"网络错误"};if("function"!=typeof b.onError)throw new Error(c[a]);b.onError(c[a])},x=function(){return!!a.Geetest},x()&&(n.slide="loaded"),y=function(b,c){var d=new g(b);b.https?d.protocol="https://":b.protocol||(d.protocol=a.location.protocol+"//"),v([d.api_server||d.apiserver],d.type_path,d,function(b){var g,e=b.type,f=function(){d._extend(b),c(new a.Geetest(d))};m[e]=m[e]||[],g=n[e]||"init","init"===g?(n[e]="loading",m[e].push(f),u(d.protocol,b.static_servers||b.domains,b[e]||b.path,null,function(a){var b,c,f,g;if(a)n[e]="fail",w("networkError",d);else{for(n[e]="loaded",b=m[e],c=0,f=b.length;f>c;c+=1)g=b[c],l(g)&&g();m[e]=[]}})):"loaded"===g?f():"fail"===g?w("networkError",d):"loading"===g&&m[e].push(f)})},a.initGeetest=y,y});